[["food-consumption-score-household-dietary-diversity.html", "Chapter 5 Food Consumption Score &amp; Household Dietary Diversity 5.1 References / Resources 5.2 Standardized Questionnaire 5.3 Calculation of FCS &amp; HDDS Indicators", " Chapter 5 Food Consumption Score &amp; Household Dietary Diversity The modules below allow you to collect and calculate FCS, FCS-N and HDDS indicators. 5.1 References / Resources FCS - https://documents.wfp.org/stellent/groups/public/documents/manual_guide_proced/wfp271449.pdf FCS_N - https://documents.wfp.org/stellent/groups/public/documents/manual_guide_proced/wfp277333.pdf HDDS - http://www.fao.org/fileadmin/user_upload/wa_workshop/docs/FAO-guidelines-dietary-diversity2011.pdf 5.2 Standardized Questionnaire 5.2.1 Paper Version of Questionnaire Here is the standardized module in word format: RBDstandardized_questionnaireFCSHDDS 5.2.2 Electronic Version of Questionnaire Here is the standardized module in xlsform: RBDstandardized_questionnaireFCSHDDS 5.3 Calculation of FCS &amp; HDDS Indicators 5.3.1 Example data set Here is the example data set: dataFCSHDDSEng still need to create 5.3.2 SPSS Syntax GET FILE=&#39;E:\\example_datasets\\dataFCSHDDSEng.sav&#39;. DATASET NAME DataSet1 WINDOW=FRONT. ** calculate Food Consumption Score compute FCS = sum(FCSStap*2, FCSPulse*3, FCSDairy*4, FCSPr*4, FCSVeg, FCSFruit, FCSFat*0.5, FCSSugar*0.5). variable labels FCS &quot;Food Consumption Score&quot;. ** create food consumption groups from food consumption score - 21/35 and 28/42 thresholds recode FCS (0 thru 21 = 1) (21 thru 35 = 2) (35 thru highest = 3) into FCSCat21. variable labels FCSCat21 &quot;Food Consumption Groups - 21/35 thresholds&quot;. recode FCS (0 thru 28 = 1) (28 thru 42 = 2) (42 thru highest = 3) into FCSCat28. variable labels FCSCat28 &quot;Food Consumption Groups - 28/42 thresholds&quot;. VALUE LABELS FCSCat21 FCSCat28 1 &quot;Poor&quot; 2 &quot;Borderline&quot; 3 &quot;Acceptable&quot;. ** calculate Household Dietary Diversity Score compute HDDS = sum(HDDSStapCer,HDDSStapRoot,HDDSPulse,HDDSDairy,HDDSPrMeatF,HDDSPrMeatO,HDDSPrFish, HDDSPrEgg,HDDSVegOrg,HDDSVegGre,HDDSVegOth,HDDSFruitOrg,HDDSFruitOth,HDDSFat,HDDSSugar,HDDSCond). variable labels HDDS &quot;Household Dietary Diversity Score&quot;. Here is the SPSS syntax file: RBDstandardized_SPSSsyntaxFCSHDDS 5.3.3 R Syntax library(haven) library(labelled) library(tidyverse) #import dataset dataFCSHDDSEng &lt;- read_sav(&quot;example_datasets/dataFCSHDDSEng.sav&quot;) #convert to labels dataFCSHDDSEng &lt;- to_factor(dataFCSHDDSEng) #calculate FCS dataFCSHDDSEng &lt;- dataFCSHDDSEng %&gt;% mutate(FCS = (2 * FCSStap) + (3 * FCSPulse)+ (4*FCSPr) +FCSVeg +FCSFruit +(4*FCSDairy) + (0.5*FCSFat) + (0.5*FCSSugar)) #create FCG groups based on 21/25 or 28/42 thresholds dataFCSHDDSEng &lt;- dataFCSHDDSEng %&gt;% mutate( FCSCat21 = case_when( FCS &lt;= 21 ~ &quot;Poor&quot;, between(FCS, 21.5, 35) ~ &quot;Borderline&quot;, FCS &gt; 35 ~ &quot;Acceptable&quot;), FCSCat28 = case_when( FCS &lt;= 28 ~ &quot;Poor&quot;, between(FCS, 28.5, 42) ~ &quot;Borderline&quot;, FCS &gt; 42 ~ &quot;Acceptable&quot;)) var_label(dataFCSHDDSEng$FCSCat21) &lt;- &quot;Food Consumption Group 21/35 thresholds&quot; var_label(dataFCSHDDSEng$FCSCat28) &lt;- &quot;Food Consumption Group 28/42 thresholds&quot; #calculate HDDS first by creating the 12 groups based on the 16 questions dataFCSHDDSEng &lt;- dataFCSHDDSEng %&gt;% mutate( HDDSStapCer = case_when(HDDSStapCer == &quot;Yes&quot; ~ 1, TRUE ~ 0), HDDSStapRoot = case_when(HDDSStapRoot == &quot;Yes&quot; ~ 1, TRUE ~ 0), HDDSVeg = case_when(HDDSVegOrg == &quot;Yes&quot; | HDDSVegGre == &quot;Yes&quot; | HDDSVegOth == &quot;Yes&quot; ~ 1, TRUE ~ 0), HDDSFruit = case_when(HDDSFruitOrg == &quot;Yes&quot; | HDDSFruitOth == &quot;Yes&quot; ~ 1, TRUE ~ 0), HDDSPrMeat = case_when(HDDSPrMeatF == &quot;Yes&quot; | HDDSPrMeatO == &quot;Yes&quot; ~ 1, TRUE ~ 0), HDDSPrEgg = case_when(HDDSPrEgg == &quot;Yes&quot; ~ 1, TRUE ~ 0), HDDSPrFish = case_when(HDDSPrFish == &quot;Yes&quot; ~ 1, TRUE ~ 0), HDDSPulse = case_when(HDDSPulse == &quot;Yes&quot; ~ 1, TRUE ~ 0), HDDSDairy = case_when(HDDSDairy == &quot;Yes&quot; ~ 1, TRUE ~ 0), HDDSFat = case_when(HDDSFat == &quot;Yes&quot; ~ 1, TRUE ~ 0), HDDSSugar = case_when(HDDSSugar == &quot;Yes&quot; ~ 1, TRUE ~ 0), HDDSCond = case_when(HDDSCond == &quot;Yes&quot;~ 1, TRUE ~ 0)) #Calculate HDDS and Cadre Harmonise Phases dataFCSHDDSEng &lt;- dataFCSHDDSEng %&gt;% mutate(HDDS = HDDSStapCer +HDDSStapRoot +HDDSVeg +HDDSFruit +HDDSPrMeat +HDDSPrEgg +HDDSPrFish +HDDSPulse +HDDSDairy +HDDSFat +HDDSSugar +HDDSCond) var_label(dataFCSHDDSEng$HDDS) &lt;- &quot;Hosehold Dietary Diversity Score&quot; #Calucate Cadre Harmonise HDDS phasing categories dataFCSHDDSEng &lt;- dataFCSHDDSEng %&gt;% mutate(HDDS_CH = case_when( HDDS &gt;= 5 ~ &quot;Phase1&quot;, HDDS == 4 ~ &quot;Phase2&quot;, HDDS == 3 ~ &quot;Phase3&quot;, HDDS == 2 ~ &quot;Phase4&quot;, HDDS &lt; 2 ~ &quot;Phase5&quot;)) var_label(dataFCSHDDSEng$HDDS_CH) &lt;- &quot;Hosehold Dietary Diversity Score - CH phasing&quot; #Generate table of proportion of households in FCG by Adm1 and Adm2 using weights #Food Consumption Group 21/35 cutoff FCSCat_table_wide &lt;- dataFCSHDDSEng %&gt;% drop_na(FCSCat21) %&gt;% group_by(ADMIN1Name, ADMIN2Name, ADMIN2Code) %&gt;% count(FCSCat21, wt = WeightHH) %&gt;% mutate(perc = 100 * n / sum(n)) %&gt;% ungroup() %&gt;% select(-n) %&gt;% spread(key = FCSCat21, value = perc) %&gt;% replace(., is.na(.), 0) %&gt;% mutate_if(is.numeric, round, 1) #Calculate phasing of FCG indicator for area (applying CH 20% rules) FCSCat_table_wide &lt;- FCSCat_table_wide %&gt;% mutate(PoorBorderline = Poor + Borderline, FCG_finalphase = case_when( Poor &lt; 5 ~ 1, #if less than 5% are in the poor food group then phase 1 Poor &gt;= 20 ~ 4, #if 20% or more are in the poor food group then phase 4 between(Poor,5,10) ~ 2, #if % of people are between 5 and 10% then phase2 between(Poor,10,20) &amp; PoorBorderline &lt; 30 ~ 2, #if % of people in poor food group are between 20 and 20% and the % of people who are in poor and borderline is less than 30 % then phase2 between(Poor,10,20) &amp; PoorBorderline &gt;= 30 ~ 3)) %&gt;% #if % of people in poor food group are between 20 and 20% and the % of people who are in poor and borderline is less than 30 % then phase2 select(ADMIN1Name, ADMIN2Name, ADMIN2Code, FCG_Poor = Poor, FCG_Borderline = Borderline, FCG_Acceptable = Acceptable, FCG_finalphase) #select only relevant variables and order in proper sequence #Generate table of proportion of households by HDDS by Adm1 and Adm2 using weights CH_HDDS_table_wide &lt;- dataFCSHDDSEng %&gt;% drop_na(HDDS_CH) %&gt;% group_by(ADMIN1Name, ADMIN2Name, ADMIN2Code) %&gt;% count(HDDS_CH, wt = WeightHH) %&gt;% mutate(perc = 100 * n / sum(n)) %&gt;% ungroup() %&gt;% select(-n) %&gt;% spread(key = HDDS_CH, value = perc) %&gt;% replace(., is.na(.), 0) %&gt;% mutate_if(is.numeric, round, 1) #Calculate phasing of HDDS indicator for area (applying CH 20% rules) #Apply the 20% rule (if it is 20% in that phase or the sum of higher phases equals 20%) CH_HDDS_table_wide &lt;- CH_HDDS_table_wide %&gt;% mutate( phase2345 = `Phase2` + `Phase3` + `Phase4` + `Phase5`, phase345 = `Phase3` + `Phase4` + `Phase5`, phase45 = `Phase4` + `Phase5`, HDDS_finalphase = case_when( `Phase5` &gt;= 20 ~ 5, `Phase4` &gt;= 20 | phase45 &gt;= 20 ~ 4, `Phase3` &gt;= 20 | phase345 &gt;= 20 ~ 3, `Phase2` &gt;= 20 | phase2345 &gt;= 20 ~ 2, TRUE ~ 1)) %&gt;% select(ADMIN1Name, ADMIN2Name, ADMIN2Code, HDDS_Phase1 = Phase1, HDDS_Phase2 = Phase2, HDDS_Phase3 = Phase3, HDDS_Phase4 = Phase4, HDDS_Phase5 = Phase5, HDDS_finalphase) Here is the R syntax file: RBDstandardized_RsyntaxFCSHDDS "]]
