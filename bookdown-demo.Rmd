--- 
title: "A Guide to Collection & Calculation of Cadre Harmonise Food Security Indicators - beta version"
author: "Research, Assesment and Monitoring (RAM) Team
         Regional Bureau Dakar
         World Food Programme
         rbd.vam@wfp.org"
date: "`r Sys.Date()`"
site: bookdown::bookdown_site
output: bookdown::gitbook
documentclass: book
bibliography: [book.bib, packages.bib]
biblio-style: apalike
link-citations: yes
---

# Purpose & How to use this Guide

This guide proposes a uniform way of collecting and analyzing key food security indicators for the Cadre Harmonise process.

Chapters are listed by indicator and include:

1. standardized data collection modules and ODK compliant xlsforms
2. sample data set 
3. standardized syntax in SPSS and R
4. references / official guidelines / source materials for the indicators



<!--chapter:end:index.Rmd-->

# Household Hunger Scale {#HHS}

## Standardized Questionnaire

Variable Name | Question Label | Answer Choices
---- | ------------- |---- 
HHhSNoFood_YN | In the past [4 weeks/30 days], was there ever no food to eat of any kind in your house because of lack of resources to get food? | 1) Yes 0) No
HHhSNoFood_FR | How often did this happen in the past [4 weeks/30 days]? | 1) Rarely (1–2 times) 2) Sometimes (3–10 times)  3) Often (more than 10 times)
HHhSBedHung_YN | In the past [4 weeks/30 days], did you or any household member go to sleep at night hungry because there was not enough food? | 1) Yes 0) No
HHhSBedHung_FR  | How often did this happen in the past [4 weeks/30 days]? | 1) Rarely (1–2 times) 2) Sometimes (3–10 times)  3) Often (more than 10 times)
HHhSNotEat_YN | In the past [4 weeks/30 days], did you or any household member go to sleep at night hungry because there was not enough food? | 1) Yes 0) No
HHhSNotEat_FR | How often did this happen in the past [4 weeks/30 days]? | 1) Rarely (1–2 times) 2) Sometimes (3–10 times)  3) Often (more than 10 times)

Here is the standardized module in xlsform:

[RBDstandardized_questionnaireHHS](https://github.com/WFP-VAM/RBD_FS_CH_guide_EN/blob/master/questionnaires/RBDstandardized_questionnaireHHS.xlsx) 

## Calculation of HHS Indicator & CH 

### Example data set

Here is the example data set:
[dataHHSEng](https://github.com/WFP-VAM/RBD_FS_CH_guide_EN/blob/master/example_datasets/dataHHSEng.sav) 

### SPSS Syntax

```{r, eval = F}

to be added

```

Here is the SPSS syntax file: 

not done yet

### R Syntax

```{r, eval = F}
library(haven)
library(labelled)
library(tidyverse)

#import dataset
dataHHSEng <- read_sav("dataHHSEng.sav")

#Calculate HHS 
dataHHSEng <- to_factor(dataHHSEng)

#Recode HHS questions into new variables with score 
dataHHSEng <- dataHHSEng %>% mutate(HHhSNoFood_FR_r = case_when(
                                      HHhSNoFood_FR == "Rarely (1–2 times)" ~ 1,
                                      HHhSNoFood_FR == "Sometimes (3–10 times)" ~ 1,
                                      HHhSNoFood_FR == "Often (more than 10 times)" ~ 2,
                                      TRUE ~ 0),
                                    HHhSBedHung_FR_r = case_when(
                                      HHhSBedHung_FR == "Rarely (1–2 times)" ~ 1,
                                      HHhSBedHung_FR == "Sometimes (3–10 times)" ~ 1,
                                      HHhSBedHung_FR == "Often (more than 10 times)" ~ 2,
                                      TRUE ~ 0),
                                    HHhSNotEat_FR_r = case_when(
                                      HHhSNotEat_FR == "Rarely (1–2 times)" ~ 1,
                                      HHhSNotEat_FR == "Sometimes (3–10 times)" ~ 1,
                                      HHhSNotEat_FR == "Often (more than 10 times)" ~ 2,
                                      TRUE ~ 0))
#Calculate HHS
dataHHSEng <- dataHHSEng %>% mutate(HHhS = HHhSNoFood_FR_r + HHhSBedHung_FR_r + HHhSNotEat_FR_r)

#Convert HH Scores to CH phases
dataHHSEng <- dataHHSEng %>% mutate(CH_HHS = case_when(
    HHhS == 0 ~ "Phase1",
    HHhS == 1 ~ "Phase2",
    HHhS %in% c(2,3,4) ~ "Phase3",
    HHhS == 4 ~ "Phase4",  
    HHhS >= 5 ~ "Phase5"))

#Generate table of proportion of households in CH HHS phases by Adm1 and Adm2 using weights
CH_HHS_table_wide <- dataHHSEng %>% group_by(ADMIN1Name, ADMIN2Name) %>%
  drop_na(CH_HHS) %>%
  count(CH_HHS, wt = hh_weight) %>%
  mutate(perc = 100 * n / sum(n)) %>%
  ungroup() %>% select(-n) %>%
  spread(key = CH_HHS, value = perc) %>% replace(., is.na(.), 0)  %>% mutate_if(is.numeric, round, 1)
```


Here is the R syntax file: 

[RBDstandardized_RsyntaxHHS](https://github.com/WFP-VAM/RBD_FS_CH_guide_EN/blob/master/syntax/RBDstandardized_RsyntaxHHS.R) 


## References / Resources



<!--chapter:end:01-HHS.Rmd-->

# reduced Coping Strategy Index {#rCSI}

## Standardized Questionnaire

Variable Name | Question Label 
---- | ------------- 
rCSILessQlty | In the past 7 days, how many days has your household had to: *Rely on less preferred and less expensive food* because you did not have enough food or money to buy food?
rCSIBorrow | In the past 7 days, how many days has your household had to: *Borrow food or rely on help from a relative or friend* because you did not have enough food or money to buy food?
rCSIMealSize | In the past 7 days, how many days has your household had to: *Limit portion size of meals* because you did not have enough food or money to buy food?
rCSIMealAdult  | In the past 7 days, how many days has your household had to: *Restrict consumption by adults in order for small children to eat* because you did not have enough food or money to buy food?
rCSIMealNb | In the past 7 days, how many days has your household had to: *Reduce the number of meals eaten per day* because you did not have enough food or money to buy food?

Here is the standardized module in xlsform:

[RBDstandardized_questionnaireCSI](https://github.com/WFP-VAM/RBD_FS_CH_guide_EN/blob/master/questionnaires/RBDstandardized_questionnairerCSI.xlsx) 


## Calculation of rCSI Indicator & CH 

### Example data set

Here is the example data set:
[datarCSIEng](https://github.com/WFP-VAM/RBD_FS_CH_guide_EN/blob/master/example_datasets/dataHHSEng.sav) 

### SPSS Syntax

```{r, eval = F}

to be added

```

Here is the SPSS syntax file: 

not done yet

### R Syntax

```{r, eval = F}
library(haven)
library(labelled)
library(tidyverse)

#import dataset
datarCSIEng <- read_sav("datarCSIEng.sav")

#Calculate HHS 
datarCSIEng <- to_factor(datarCSIEng)

#calculate rCSI Score
datarCSIEng <- datarCSIEng %>% mutate(rCSI = rCSILessQlty  + (2 * rCSIBorrow) + rCSIMealSize + (3 * rCSIMealAdult) + rCSIMealNb)

#convert rCSI Score into thresholds 
datarCSIEng <- datarCSIEng %>% mutate(CH_rCSI = case_when(
  rCSI <= 3 ~ "Phase1", 
  between(rCSI,4,18) ~ "Phase2",       
  rCSI >= 19 ~ "Phase3"))

#Generate table of proportion of households in CH rCSI phases by Adm1 and Adm2 using weights
CH_rCSI_table_wide <- datarCSIEng %>% group_by(ADMIN1Name, ADMIN2Name) %>%
  drop_na(CH_rCSI) %>%
  count(CH_rCSI, wt = hh_weight) %>%
  mutate(perc = 100 * n / sum(n)) %>%
  ungroup() %>% select(-n) %>%
  spread(key = CH_rCSI, value = perc) %>% replace(., is.na(.), 0)  %>% mutate_if(is.numeric, round, 1)
```



Here is the R syntax file: 

[RBDstandardized_RsyntaxrCSI](https://github.com/WFP-VAM/RBD_FS_CH_guide_EN/blob/master/syntax/RBDstandardized_RsyntaxrCSI.R) 


## References / Resources


<!--chapter:end:02-rCSI.Rmd-->

# Methods

We describe our methods in this chapter.

<!--chapter:end:03-method.Rmd-->

# Applications

Some _significant_ applications are demonstrated in this chapter.

## Example one

## Example two

<!--chapter:end:04-application.Rmd-->

# Final Words

We have finished a nice book.

<!--chapter:end:05-summary.Rmd-->

`r if (knitr:::is_html_output()) '
# References {-}
'`

<!--chapter:end:06-references.Rmd-->

